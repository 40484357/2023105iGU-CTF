<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title></title>
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css')}}" />
	<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>
   
	<div class="gameLauncher" id="phoneChallenges">
		<div class="gameHeader">
			<div class="navButton"onclick="goToEvidence()">Back</div>
			<div class="roomTitle">Crypto Cartel: The Wallet</div>
			<div id="clock"></div>
		</div>
		<div class="toolButtonContainer">
			<div class="buttonContainer tooltip">
				<div class="buttonHelp" onclick="openInfoBox()">
					<div class="buttonInfo">
						<span class="material-symbols-outlined">help</span>
					</div>
				</div>
			</div>
			<div class="buttonContainer tooltip">
				<div class="buttonHelp" onclick="openToolBox()">
					<div class="buttonInfo">
						<span class="material-symbols-outlined">
							construction
						</span>
					</div>
				</div>
			</div>
			<div class="buttonContainer tooltip">
				<div class="buttonHelp" onclick="openWiki()">
					<div class="buttonInfo">
						<span class="material-symbols-outlined">
							dictionary
						</span>
					</div>
				</div>
			</div>
			<div class="buttonContainer tooltip">
				<button class="buttonHelp" onclick="toggleHint()">
					<span class="material-icons-outlined md-30">&#xE79A;</span>
				</button>
				<span class="tooltiptext">Use a hint!</span>
			</div>
		</div>
		<div class="gameBox" id="gameInfoBox">
			<div class="closeBox" >
				<span class="material-symbols-outlined" onclick="openInfoBox()">
					close
				</span>
			</div>
			<p class="hashDescript">In order to gain access to John's transaction, you need to hijack his browser session. His session ID is within the browser's cookies.</p>
            <p class="hashDescript">Try decoding this script and using it:<br><br> PGltZyBzcmM9eCBvbmVlcnJvcj1hbGVydChkb2N1bWVudC5jb29raWUpPg==</p>
			<button class = 'copyClip' id = "copyScript" onclick="copyScript()">Copy Script</button>
		</div>
		<div class="toolBox hidden" id="toolBox">
			<div class="closeBox" >
				<span class="material-symbols-outlined" onclick="openToolBox()">
					close
				</span>
			</div>
			<p class="toolBoxHeader">Tools</p>
			<p class="toolBoxTool">Hash Decrypter</p>
			<a href="https://hashes.com/en/decrypt/hash" target="_blank">
			<div class="openToolButton">
				Open Tool
			</div>
			</a>
		</div>
		<div class="toolBox hidden" id="hintDiv">
			<div class="closeBox">
				<span class="material-symbols-outlined" onclick="toggleHint()">
					close
				</span>
			</div>
			<p class="toolBoxHeader">Hints</p>
			<p class="toolBoxTool" id="hintText">
				You can request a hint for each challenge. Each hint used will cost you 10 points from your final score. There is one hint available for each challenge
			</p>
			<div class="openToolButton" onclick="getHint('webChallHint2')">
				Get Hint
			</div>
		</div>
		<div class="toolBox hidden" id="wikiBox">
			<div class="closeBox" >
				<span class="material-symbols-outlined" onclick="openWiki()">
					close
				</span>
			</div>
			<p class="toolBoxHeader">Session Hijacking</p>
			<p class="toolBoxTool">Read the wiki here</p>
			<a href="/wiki" target="_blank">
			<div class="openToolButton">
				Open Wiki
			</div>
			</a>
		</div>
        <div class="virtualBrowser">
            <div class="addressBar">
              <div class="column left">
                <span class="dot" style="background:#ED594A;"></span>
                <span class="dot" style="background:#FDD800;"></span>
                <span class="dot" style="background:#5AC05A;"></span>
              </div>
              <div class="column middle">
                <input type="text" id = "urlText" value="http://www.cryptocartel.com">
              </div>
             
            </div>
          
            <div class="browserContent2">
				<h1>Crypto Cartel</h1>
                <h2>Admin Overview</h2>
                {% with messages = get_flashed_messages() %} {% if messages %}
						{% for message in messages %}
        
						    <div class = "popupAlert" id = "popupAlert">
                                <p>This page says</p>
                                {{message}}<br><br>
                                <button id = "closeAlert" onclick="closeAlert()">Close</button>
                            </div>
						{% endfor %}
				{% endif %} {% endwith %}
				
				<div class = "mainPanel">
					<h3>John's Wallet</h3>
					<div class = grid1>
						<div class = "leftColumn">
							<h4>Wallet Overview</h4>	
							<h4>139.75 BTC</h4>
							<h4>$4,091,729.10</h4>
						</div>
						<div class = "rightColumn">
							<h4>Today</h4>
							<h4>-0.26%</h4>
							<h4>-$10840</h4>
						</div>
					</div>
					<div class = "transactionSection">
						<h3>Transaction history</h3>
						<h4><mark>Crypto</mark>&emsp;Fiat&emsp;Transfer&emsp;Distribution&emsp;CC convert&emsp;Loan</h4>
					</div>
					<div class = "grid2">
						<div class = "firstColumn">
							<h4>Type</h4>
							<h4>Withdrawl</h4>
						</div>
						<div class = "secondColumn">
							<h4>Time</h4>
							<h4>All time</h4>
						</div>
						<div class = "thirdColumn">
							<h4>Asset</h4>
							<h4>All</h4>
						</div>
					</div>
					<div class = "grid3">
						<div class = "firstColumn">
							<h4>Time</h4>
							<h4>2023-07-22</h4>
						</div>
						<div class = "secondColumn">
							<h4>Type</h4>
							<h4>Withdrawl</h4>
						</div>
						<div class = "thirdColumn">
							<h4>Asset</h4>
							<h4>BTC</h4>
						</div>
						<div class = "fourthColumn">
							<h4>Amount</h4>
							<h4>115.15223</h4>
						</div>
						<div class = "fifthColumn">
							<h4>Destination</h4>
							<h4>{{hiddenWalletAddress}}</h4>
						</div>
						<div class = "sixthColumn">
							<h4>Status</h4>
							<h4>Completed</h4>
						</div>
						<div class = "seventhColumn">
							<button id = "view" onclick="openSessionForm()">View</button>
						</div>
					</div>
					<form class="hidden" id="ccSessionForm" action="" method="POST">
						<label for="ccSessionID">Session ID:</label><br>
						<input type="text" id="ccSession" placeholder = "Enter the session ID to view txn" name="ccSession"><br><br>
						<input type="submit" name = "session" id="ccView" value="Enter">
				  	</form> 
					
				</div>
				<p>Execute browser script</p>
                <form class = "ccScriptForm" action="" method="POST">
                    <input type="text" id="ccScript" name="ccScript"><br><br>
                    <input type="submit" name = "script" id="ccScriptSubmit" value="Execute">
                </form>
            </div>
          </div>


	</div>
	
</body>
<script src="{{ url_for('static', filename='script.js')}}" async defer></script>
<script>
	var wikiBox = document.getElementById('wikiBox')
	var infoBox = document.getElementById('gameInfoBox')
	var toolBox = document.getElementById('toolBox')
	var hintBox = document.getElementById('hintDiv')
	
	function checkInfo(){
		let infoShow = localStorage.getItem('webchall2')
		if(infoShow == 'True'){
			openInfoBox()
		} 
		else{
			localStorage.setItem('webchall2', 'True')
		}
	}

	checkInfo()

	function toggleHint(){
		hintBox.classList.toggle('hidden')
		infoBox.classList.add('hidden')
		toolBox.classList.add('hidden')
		wikiBox.classList.add('hidden')
	}

	function openInfoBox(){
		infoBox.classList.toggle('hidden')
		toolBox.classList.add('hidden')
		wikiBox.classList.add('hidden')
		hintDiv.classList.add('hidden')
	}

	function openWiki(){
		wikiBox.classList.toggle('hidden')
		toolBox.classList.add('hidden')
		infoBox.classList.add('hidden')
		hintDiv.classList.add('hidden')
	}

	function openToolBox(){
		toolBox.classList.toggle('hidden')
		wikiBox.classList.add('hidden')
		infoBox.classList.add('hidden')
		hintDiv.classList.add('hidden')
	}
</script>
</html>