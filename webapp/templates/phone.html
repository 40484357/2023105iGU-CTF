<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title></title>
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			rel="stylesheet"
			href="{{ url_for('static', filename='styles.css')}}"
		/>
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	</head>
	<body>
		<div class="gameLauncher" id="phoneChallenges">
			<div class="gameHeader">
				<div class="navButton" onclick="goToEvidence()">Back</div>
				<div class="roomTitle">The Locked Phone</div>
				<div id="clock"></div>
				
			</div>
			<div class="toolButtonContainer">
				<div class="buttonContainer tooltip">
					<div class="buttonHelp" onclick="openInfoBox()">
						<div class="buttonInfo">
							<span class="material-symbols-outlined">help</span>
						</div>
					</div>
				</div>
				<div class="buttonContainer tooltip">
					<div class="buttonHelp" onclick="openToolBox()">
						<div class="buttonInfo">
							<span class="material-symbols-outlined">
								construction
							</span>
						</div>
					</div>
				</div>
				<div class="buttonContainer tooltip">
					<div class="buttonHelp" onclick="openWiki()">
						<div class="buttonInfo">
							<span class="material-symbols-outlined">
								dictionary
							</span>
						</div>
					</div>
				</div>
				<div class="buttonContainer tooltip">
					<button class="buttonHelp" onclick="toggleHint()">
						<span class="material-icons-outlined md-30">&#xE79A;</span>
					</button>
					<span class="tooltiptext">Use a hint!</span>
				</div>
			</div>
			<div class="toolBox hidden" id="hintDiv">
				<div class="closeBox">
					<span class="material-symbols-outlined" onclick="toggleHint()">
						close
					</span>
				</div>
				<p class="toolBoxHeader">Hints</p>
				<p class="toolBoxTool" id="hintText">
					You can request a hint for each challenge. Each hint used will cost you 10 points from your final score. There is one hint available for each challenge
				</p>
				<div class="openToolButton" onclick="getHint('phoneHint')">
					Get Hint
				</div>
			</div>
			<div class="gameBox" id="gameInfoBox">
				<div class="closeBox" >
					<span class="material-symbols-outlined" onclick="openInfoBox()">
						close
					</span>
				</div>
				<p class="phoneDescript">
					This phone is protected by a passcode.<br>
                    We have discovered some information that may help you.<br>
                </p>
				<p class="phoneDescript">
                    Prime: 604931<br>
                    Generator: 30672<br>
                    Private key 1: {{a}}<br>
                    Private key 2: {{b}}<br>
                    Can you crack it?
				</p>
				
			</div>
			<div class="toolBox hidden" id="wikiBox">
				<div class="closeBox" >
					<span class="material-symbols-outlined" onclick="openWiki()">
						close
					</span>
				</div>
				<p class="toolBoxHeader">Diffie Hellman Wiki</p>
				<p class="toolBoxTool">Read the wiki here</p>
				<a href="/wiki" target="_blank">
				<div class="openToolButton">
					Open Wiki
				</div>
				</a>
			</div>
			<div class="toolBox hidden" id="toolBox">
				<div class="closeBox" >
					<span class="material-symbols-outlined" onclick="openToolBox()">
						close
					</span>
				</div>
				<p class="toolBoxHeader">Tools</p>
				<p class="toolBoxTool">Diffie Hellman Key Exchange</p>
				<a href="https://www.dcode.fr/echange-cle-diffie-hellman" target="_blank">
				<div class="openToolButton">
					Open Tool
				</div>
				</a>
			</div>
			<div class="phoneLockscreen">
                
				<form class = "passcode" action="" method="POST" id = "passcodeForm">
					<input type="text" name="answer" id="phoneAnswer" placeholder="" onkeydown="return false">
					<input type="submit" id="submitAnswer" value = "&#x21A9;">
				</form>
				{% with messages = get_flashed_messages() %} {% if messages %}
				<ul class="phoneFlash">
					{% for message in messages %}
					<li class="message">{{message}}</li>
					{% endfor %}
				</ul>
				{% endif %} {% endwith %}
                    <ul class="keypad">
                        <button class="dial" onclick="dial(1)">1</li>
                        <button class="dial" onclick="dial(2)">2</li>
                        <button class="dial" onclick="dial(3)">3</li>
                        <button class="dial" onclick="dial(4)">4</li>
                        <button class="dial" onclick="dial(5)">5</li>
                        <button class="dial" onclick="dial(6)">6</li>
                        <button class="dial" onclick="dial(7)">7</li>
                        <button class="dial" onclick="dial(8)">8</li>
                        <button class="dial" onclick="dial(9)">9</li>
                        <button class="dial middle"onclick="dial(0)">0</li>
						<button class = "dial" onclick = "backspace()">âŒ«</li>
                    </ul>
                   

            </div>

				
			</div>
			
		</div>
		<script
			src="{{ url_for('static', filename='script.js')}}"
			async
			defer
		></script>
		<script>
			var wikiBox = document.getElementById('wikiBox')
			var infoBox = document.getElementById('gameInfoBox')
			var toolBox = document.getElementById('toolBox')
			var hintBox = document.getElementById('hintDiv')
			
			function checkInfo(){
				let infoShow = localStorage.getItem('phoneInfo')
				if(infoShow == 'True'){
					openInfoBox()
				} 
				else{
					localStorage.setItem('phoneInfo', 'True')
				}
			}

			checkInfo()

			function toggleHint(){
				hintBox.classList.toggle('hidden')
				infoBox.classList.add('hidden')
				toolBox.classList.add('hidden')
				wikiBox.classList.add('hidden')
			}

			function openInfoBox(){
				infoBox.classList.toggle('hidden')
				toolBox.classList.add('hidden')
				wikiBox.classList.add('hidden')
				hintDiv.classList.add('hidden')
			}

			function openWiki(){
				wikiBox.classList.toggle('hidden')
				toolBox.classList.add('hidden')
				infoBox.classList.add('hidden')
				hintDiv.classList.add('hidden')
			}

			function openToolBox(){
				toolBox.classList.toggle('hidden')
				wikiBox.classList.add('hidden')
				infoBox.classList.add('hidden')
				hintDiv.classList.add('hidden')
			}
		</script>
	</body>
</html>